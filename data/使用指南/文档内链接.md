# 文档内链接

在 EasyDocument 系统中，合理使用链接可以增强文档的导航性和可用性。本文档介绍如何在文档中创建各种类型的链接。

## 链接格式说明

EasyDocument 在 v1.2.5 版本中引入了新的链接格式，同时保持对旧格式的兼容性。

### 新格式 (v1.2.5+)

新的链接格式采用更简洁的哈希路径结构：

```
main.html#root/path/to/file.md#anchor
```

**格式结构**：
- `main.html#` - 基础路径
- `root/` - 根目录参数（可选）
- `path/to/file.md` - 文档路径
- `#anchor` - 锚点链接（可选）

**示例**：
```
main.html#使用指南/文档内链接.md
main.html#使用指南/文档内链接.md#链接语法
main.html#使用指南/使用指南/文档编写规范.md
```

### 旧格式兼容 (v1.2.4及更早)

系统仍然支持旧的查询参数格式：

```
main.html?path=xxx&root=xxx#anchor
```

**示例**：
```
main.html?path=使用指南/文档内链接.md
main.html?path=使用指南/文档内链接.md#链接语法
main.html?root=使用指南&path=使用指南/文档编写规范.md
```

### 格式对比

| 特性 | 新格式 (v1.2.5+) | 旧格式 (兼容) |
|------|------------------|---------------|
| **简洁性** | ✅ 更简洁，类似文件路径 | ❌ 较冗长的查询参数 |
| **可读性** | ✅ 直观易读 | ❌ 需要解析参数 |
| **SEO友好** | ✅ 搜索引擎友好 | ❌ 查询参数形式 |
| **复制分享** | ✅ 更适合分享 | ❌ 参数较复杂 |
| **兼容性** | ✅ 当前推荐 | ✅ 保持兼容 |

> [IMPORTANT] 版本说明
> - **v1.2.5+**: 推荐使用新的哈希路径格式
> - **向下兼容**: 旧的查询参数格式仍然可用
> - **自动转换**: 系统会自动处理两种格式的链接

## 链接语法

EasyDocument 支持两种链接语法：

### 1. 简化的常规 Markdown 语法（推荐）

EasyDocument 现在支持直接使用标准 Markdown 链接语法：

```markdown
[链接文本](目标路径.md)
```

系统会自动处理文件路径，无需添加额外的查询参数。这种语法：
- 更易读，更易写
- 与其他 Markdown 文档系统兼容
- 支持文件和目录链接

示例：
```markdown
[配置详解](配置详解/README.md)
[文档编写规范](文档编写规范.md)
```

### 2. 查询参数链接语法

EasyDocument 也支持使用查询参数的链接语法（传统方式）：

```markdown
[链接文本](?path=目标路径)
```

其中：
- `链接文本` - 显示给用户的可点击文本
- `目标路径` - 目标文档相对于 `/data` 目录的路径

## 根目录参数（root参数）

EasyDocument 支持使用 `root` 参数限制导航的范围，只显示指定目录下的内容。这对于创建聚焦于特定主题的文档视图非常有用。

### 新格式用法 (v1.2.5+)

在新的哈希路径格式中，根目录参数直接包含在路径中：

```
main.html#root目录/文档路径.md
```

**示例**：
```markdown
# 链接到"快速入门"目录视图
[快速入门文档集](main.html#快速入门/)

# 链接到"快速入门"目录下的特定文档
[Markdown语法指南](main.html#快速入门/Markdown语法.md)

# 在当前目录下的链接（Markdown格式）
[配置详解](../配置详解/README.md)
```

### 旧格式用法（兼容）

传统的查询参数格式仍然可用：

```markdown
[链接文本](?root=指定目录)
```

或者与 `path` 参数结合使用：

```markdown
[链接文本](?root=指定目录&path=目标路径)
```

### 作用

1. **简化导航** - 左侧导航栏只显示指定目录下的内容，避免信息过载
2. **重定向文档根目录** - 所有相对路径都会相对于指定的根目录解析
3. **聚焦特定主题** - 为特定用户或场景提供更加聚焦的文档体验

### 示例对比

| 格式 | 示例 |
|------|------|
| **新格式** | `main.html#快速入门/Markdown语法.md` |
| **旧格式** | `main.html?root=快速入门&path=快速入门/Markdown语法.md` |
| **Markdown链接** | `[语法指南](../快速入门/Markdown语法.md)` |

## 链接类型

### 链接到其他文档

#### 推荐：Markdown相对路径（推荐）

```markdown
[配置详解](../配置详解/README.md)
[同目录文档](文档编写规范.md)
```

#### 新格式：直接哈希路径

```markdown
[配置详解](main.html#配置详解/README.md)
```

#### 旧格式兼容：查询参数方式

```markdown
[配置详解](?path=配置详解/README.md)
```

### 链接到同一目录中的文档

#### Markdown相对路径（推荐）

```markdown
[文档编写规范](文档编写规范.md)
```

#### 新格式：哈希路径

```markdown
[文档编写规范](main.html#使用指南/文档编写规范.md)
```

#### 旧格式兼容

```markdown
[文档编写规范](?path=使用指南/文档编写规范.md)
```

### 链接到文档的特定部分

要链接到文档中的特定章节，可以使用标题的锚点链接。系统会自动为每个标题生成一个基于其文本内容的唯一ID。

#### 标题ID生成规则

1. 标题文本会被转换为小写
2. 特殊字符会被转换为连字符（-）
3. 连续的空格和连字符会被合并为单个连字符
4. 生成的ID会自动添加到标题元素中

例如：

```markdown
# 配置详解
```

会生成ID：`配置详解`

```markdown
# 快速入门指南
```

会生成ID：`快速入门指南`

> [WARNING] 旧版标题ID格式已废弃
> - 旧版的 `#heading-x` 格式（如 `#heading-1`）在已 v1.2.4 版本起被废弃
> - 系统在 v1.2.4 仍然支持通过旧格式访问标题，但不会主动生成这种格式的ID
> - 建议使用新的基于标题文本的ID格式
> - 如果您在文档中看到旧格式的链接，可以更新为新的格式，例如：
>   - 旧格式：`#heading-1`
>   - 新格式：`#配置详解`

#### 使用锚点链接

##### Markdown相对路径（推荐）

```markdown
[配置外观部分](../配置详解/外观设置.md#配置外观)
[本文档的链接语法](#链接语法)
```

##### 新格式：哈希路径 + 锚点

```markdown
[配置外观部分](main.html#配置详解/外观设置.md#配置外观)
[本文档的链接语法](main.html#使用指南/文档内链接.md#链接语法)
```

##### 旧格式兼容

```markdown
[配置外观部分](?path=配置详解/外观设置.md#配置外观)
```

> [TIP] 标题ID提示
> - 您可以通过右键点击标题来复制其锚点链接
> - 系统会自动处理标题ID的生成，无需手动指定
> - 标题ID会保持稳定，即使文档内容更新也不会改变

## 右键菜单功能

EasyDocument 为所有链接和文件夹提供了便捷的右键菜单功能，大大提升了文档使用的便利性。

### 功能特性

在以下元素上右键点击即可使用右键菜单：
- 左侧导航栏的文档链接和文件夹
- 右侧目录中的标题链接  
- 文档内容中的内部链接
- 面包屑导航中的链接
- 顶部导航栏的内部链接

### 菜单选项

右键菜单提供三个主要功能：

#### <i class="icon fas fa-copy text-primary"></i> 复制链接
快速复制完整的文档链接地址到剪贴板，方便分享或在其他地方使用。

#### <i class="icon fas fa-file-alt text-primary"></i> 复制MD格式链接  
自动生成标准的 Markdown 链接格式：`[链接标题](链接地址)`，可以直接粘贴到 Markdown 文档中。

#### <i class="icon fas fa-eye text-primary"></i> 预览文档
在弹窗中快速预览文档内容，支持：
- 在独立窗口中完整显示文档
- 文件夹预览会显示其索引页面
- 使用 `ESC` 键或点击背景关闭预览
- 自动适配暗色/亮色主题切换
- 支持与主题系统的无缝集成

### 使用示例

1. **快速分享链接**: 在文档链接上右键选择"复制链接"，即可获得完整的可分享URL
2. **编写文档引用**: 右键选择"复制MD格式链接"，直接获得可用于文档中的 Markdown 链接
3. **快速预览**: 不确定链接内容时，使用"预览"功能快速查看目标文档

> [NOTE] 智能识别
>
> 系统会自动识别链接类型，文件夹链接会在预览标题中显示"(文件夹)"标识。

## 链接最佳实践

### 使用描述性的链接文本

链接文本应该清晰地描述链接目标，而不是使用"点击这里"或"了解更多"等模糊表述：

```markdown
- ❌ 不好: [点击这里](配置详解/README.md)了解配置详解
- ✅ 好: 查看[配置详解](配置详解/README.md)获取更多信息
```

### 避免过多的链接

过多的链接会分散读者的注意力。只在真正有助于读者理解或需要补充信息时添加链接。

### 区分内部和外部链接

系统会自动为外部链接添加图标标识，并在新标签页中打开。外部链接示例：

```markdown
[EasyDocument GitHub 仓库](https://github.com/LoosePrince/EasyDocument)
```

## 链接维护

### 防止链接失效

文档重组或重命名时，记得更新所有相关链接。失效的链接会降低文档的可用性和专业性。

### 定期检查链接

定期检查文档中的链接是否正常工作，特别是在进行大规模文档重组后。

### 相关文档链接

在文档结尾处添加相关文档的链接可以引导读者了解更多相关信息：

```markdown
## 相关文档

- [文档编写规范](文档编写规范.md)
- [基本使用流程](基本使用流程.md)
```

## 图片链接

要在文档中插入图片，请使用以下语法：

```markdown
![图片描述](assets/img/example.png)
```

图片路径可以是相对于当前文档的路径，也可以是完整的 URL。

## 链接到外部资源

对于指向外部资源的链接，使用完整的 URL，系统会自动添加外部链接图标：

```markdown
[MDN Web 文档](https://developer.mozilla.org/)
```

## 实际示例

以下是一些实际使用中的链接示例：

```markdown
- 要了解如何配置系统，请参阅[配置详解](配置详解/README.md)。
- 关于 Markdown 语法的更多信息，请查看[Markdown语法指南](快速入门/Markdown语法.md)。
- 如果您是初次使用，建议先阅读[快速入门指南](快速入门/README.md)。
- 关于如何部署到 GitHub Pages，请参考[部署指南](开发与部署/部署指南.md#部署到github-pages)。
- 要只查看快速入门文档，请点击[快速入门专区](?root=快速入门)。
```

## 格式选择建议

### 推荐用法 (v1.2.5+)

1. **文档内链接优先使用 Markdown 相对路径**
   ```markdown
   [同级文档](文档名.md)
   [上级目录](../目录名/文档名.md)
   [下级目录](子目录/文档名.md)
   ```

2. **特殊需求时使用新的哈希格式**
   ```markdown
   [直接链接](main.html#完整/路径/文档名.md)
   [带锚点](main.html#完整/路径/文档名.md#锚点)
   ```

3. **右键菜单自动生成的链接**
   - 复制链接功能会生成新格式的完整URL
   - 复制MD格式链接会生成相对路径的Markdown链接

### 兼容性说明

- 所有旧格式链接继续可用，无需手动更新
- 新创建的链接建议使用新格式或Markdown相对路径
- 系统会自动处理格式转换和兼容性

## 小结

良好的链接策略和提示卡片的使用可以显著提高文档的可用性和导航性。遵循本文档中的建议，可以创建既有帮助又不会分散注意力的文档系统。

> [TIP] 推荐链接格式 (v1.2.5+)
> 
> - **首选**: 使用 Markdown 相对路径 `[文档](../path/file.md)` - 简洁且兼容
> - **特殊需求**: 使用新的哈希格式 `[文档](main.html#path/file.md)` - 完整路径
> - **右键菜单**: 自动生成最适合的链接格式
> - **旧格式**: 保持兼容，但建议逐步迁移到新格式

## 相关文档

- [文档编写规范](使用指南/文档编写规范.md)
- [基本使用流程](使用指南/基本使用流程.md)