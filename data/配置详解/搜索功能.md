# 搜索功能配置

本文档详细介绍 EasyDocument 系统的搜索功能配置项，这些配置项控制文档搜索的行为和界面展示。

## 搜索功能概述

EasyDocument 内置了强大的全文搜索功能，允许用户快速查找文档内容。系统会索引所有文档文本，支持按标题、内容和关键词搜索，并在搜索结果中高亮匹配内容。

## 可用配置项

| 配置项 | 类型 | 默认值 | 说明 |
|-------|------|-------|------|
| `enable` | 布尔值 | `true` | 是否启用搜索功能 |
| `min_chars` | 数字 | `2` | 最小搜索字符数 |
| `max_results` | 数字 | `20` | 最大结果显示数量 |
| `placeholder` | 字符串 | `"搜索文档..."` | 搜索框占位符文本 |
| `search_cached` | 布尔值 | `true` | 是否搜索缓存的文档内容 |
| `search_on_type` | 布尔值 | `false` | 是否在输入时自动搜索 |

## 详细说明

### enable

控制是否启用搜索功能。设置为 `false` 时，整个搜索功能将被禁用，搜索图标和相关UI元素不会显示。

```javascript
search: {
  enable: false // 禁用搜索功能
}
```

在小型文档或特定场景下，可能不需要搜索功能，禁用它可以简化界面。

### min_chars

设置开始搜索所需的最小字符数。用户必须至少输入这么多字符才会触发搜索。

```javascript
search: {
  min_chars: 3 // 至少输入3个字符才会开始搜索
}
```

较高的最小字符数可以避免过于宽泛的搜索结果，提高搜索效率和精度。

### max_results

控制搜索结果显示的最大数量。当搜索匹配很多文档时，只会显示排名最高的结果。

```javascript
search: {
  max_results: 30 // 显示最多30个搜索结果
}
```

增加这个值可以展示更多搜索结果，但可能会导致结果列表过长，影响用户体验。

### placeholder

设置搜索框中显示的占位符文本。

```javascript
search: {
  placeholder: "输入关键词搜索..." // 自定义占位符文本
}
```

可以根据文档的语言和用途自定义此文本，提高用户的理解和使用体验。

### search_cached

控制是否搜索已缓存的文档内容。启用此选项可以加快搜索速度，但如果文档内容频繁更新，可能会导致搜索结果不是最新的。

```javascript
search: {
  search_cached: false // 不使用缓存，始终获取最新内容
}
```

对于经常更新的文档，可以考虑禁用此选项以确保搜索结果的准确性。

### search_on_type

控制是否在用户输入时自动执行搜索（实时搜索）。启用此功能后，搜索结果会随着用户输入而即时更新。

```javascript
search: {
  search_on_type: true // 启用实时搜索
}
```

注意：此功能在当前版本中尚未完全实现，即使设置为 `true` 也可能不会生效。

## 搜索索引与原理

EasyDocument 的搜索功能基于 `search.json` 文件，该文件包含所有文档的索引信息，包括标题、路径、内容摘要和关键词。默认情况下，`build.py` 脚本会在构建时自动生成这个文件。

索引格式示例：

```json
[
  {
    "title": "文档标题",
    "path": "文档路径.md",
    "content": "文档内容的摘要...",
    "keywords": ["关键词1", "关键词2", "关键词3"]
  }
]
```

搜索时，系统会根据用户输入的关键词匹配索引中的标题、内容和关键词字段，并按相关性排序结果。

## 自定义搜索索引

如果您需要对某些文档增强搜索能力，可以手动编辑 `search.json` 文件，为文档添加更多关键词或优化内容摘要。但请注意，重新运行 `build.py` 会覆盖这些手动修改。

## 搜索结果展示

搜索结果会在弹出的模态窗口中显示，每个结果项包括：

1. **文档标题**：匹配的文档标题
2. **文档路径**：显示文档在结构中的位置
3. **内容摘要**：包含匹配关键词的内容片段，匹配部分会高亮显示
4. **导航链接**：点击结果项会直接跳转到相应文档

## 性能考虑

对于大型文档系统，搜索性能可能会受到影响。以下是一些优化建议：

1. 增加 `min_chars` 值，避免过于宽泛的搜索
2. 适当限制 `max_results` 值，减少渲染负担
3. 启用 `search_cached`，利用缓存提高速度
4. 确保 `search.json` 文件不过大，必要时可以拆分为多个索引文件

## 完整配置示例

```javascript
search: {
  enable: true,
  min_chars: 2,
  max_results: 20,
  placeholder: "搜索文档...",
  search_cached: true,
  search_on_type: false
}
```

## 相关文档

- [配置详解](?path=配置详解/README.md)
- [构建工具 (build.py)](?path=使用指南/构建工具.md)
- [搜索与缓存功能](?path=使用指南/搜索与缓存.md) 